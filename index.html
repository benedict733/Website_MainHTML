<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <!-- Facebook SEO Meta Tags -->
        <meta property="og:url" content="index.html" />
        <meta property="og:type" content="article" />
        <meta property="og:title" content="Benedict's Webpage" />
        <meta property="og:description" content="Personal Portfolio Page" />

        <meta name="description" content="Personal portfolio webpage using only HTML" />
        <meta name="keywords" content="HTML, CSS, JavaScript" />
        <meta name="author" content="Benedict Tan" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Benedict's Personal Portfolio</title>
        <link rel="stylesheet" href="styles.css" />
        <link href="images/favicon.ico" rel="icon" />
        <script>
            window.addEventListener('load', function () {
                let time = window.performance.timing,
                    complete = time.domComplete - time.domLoading;
                document.getElementById('page-load-info').innerHTML = `<strong>Page Loaded in ${parseInt(complete)}ms
                 on ${new Date().toLocaleString("en-US")}</strong>`;
            });
        </script>
    </head>

    <body>
        <header>
            <h1> Benedict's Personal Portfolio</h1>
            <figure>
                <img src="images/Benedict_Shark.jpg" alt="image of Benedict being eaten up by a shark statue" height="200" width="200">
                <figcaption>Picture of Benedict being eaten up by a shark statue</figcaption>
            </figure>
            <nav>
                <ol>
                    <li>
                        <a href="About-Me">About Me</a>
                    </li>
                    <li>
                        <a href="Skills">Skills</a>
                    </li>
                    <li>
                        <a href="Projects">Projects</a>
                    </li>
                    <li>
                        <a href="Testing-HTML-Elements">Testing HTML Elements</a>
                    </li>
                    <li>
                        <a href="Contact-Me">Contact Me</a>
                    </li>
                    <li>
                        <a href="Example Form">Example Form</a>
                    </li>
                </ol>
            </nav>
        </header>
        <hr>

        <main>
            <section id="About-Me">
                <h2>About Me</h2>
                <p>
                    I am an inquisitive, passionate <strong>Penultimate Business Analytics</strong> undergraduate 
                    in NUS, exploring my interests in software engineering and data science. 
                </p>
                <aside>
                    <h3>Future Prospects</h3>
                    <p>
                        I am currently seeking an internship opportunity to leverage my programming skills in 
                        <em>software development or big data and machine learning</em>. Bringing forth a motivated 
                        attitude and a hunger to learn and do my best.
                    </p>
                </aside>
            </section>
            <br>
            <section id="Skills">
                <h2>Skills</h2>
                <table>
                    <caption>
                        <b>
                            <u>Skills listed may not be up to date</u>
                        </b>
                    </caption>
                    <colgroup></colgroup>
                </table>
            </section>
            <br>
            <section id="Projects">
                <h2>Projects</h2>
            </section>
            <br>
            <section id="Testing-HTML-Elements">
                <h2>Testing HTML Elements</h2>
                <details>
                    <summary>Audio sample</summary>
                    <audio controls>
                        <source src="assets/test_recording.mp3" type="audio/mp3">
                    </audio>
                </details>
                <details>
                    <summary>Video sample</summary>
                    <video controls height="400">
                        <source src="assets/billiards_break.mp4" type="video/mp4">
                    </video>
                </details>
                <details>
                    <summary>Circle using svg tag</summary>
                    <svg height="100" width="100">
                        <circle cx="50" cy="50" r="50" fill="skyblue"></circle>
                    </svg>
                </details>
                <details>
                    <summary>Picture sample</summary>
                    <picture>
                        <source type="image/png" srcset="images/personal_logo.png">
                        <img src="images/personal_logo.png" alt="Personal Logo of Benedict" height="100">
                    </picture>
                </details>
                <details>
                    <summary>Using MathML to write the formula for Einstein's famous formula:</summary>
                    <math xmlns="http://www.w3.org/1998/Math/MathML">
                        <mrow>
                            <msup>
                              <mi>E = mc</mi>
                              <mn>2</mn>
                            </msup>
                          </mrow>
                        </math>
                </details>
                <details>
                    <summary>Python code sample for FizzBuzz</summary>
                    Trust me, this one liner Python code works
                    <pre>
                        <code>
                            [print("Fizz"*(i%3==0)+"Buzz"*(i%5==0) or i) for i in range(101)]
                        </code>
                        <b>OR</b>
                        <code>
                            lst = ["Fizz"*(i%3==0)+"Buzz"*(i%5==0) or i for i in range(101)]
                            for i in lst:
                                print(i)
                        </code>
                    </pre>
                </details>

            </section>
            <br>
            <button id="themeToggle" onclick="toggleTheme()">Toggle Theme</button>
            <br>
            <section id="Contact-Me">
                <h2>Contact Me</h2>
                <form>
                    <fieldset>
                        <legend>Connect with me</legend>
                        <label for="name">Your Name</label>
                        <input type="text" id="name" placeholder="Your Name...">
                        <br>                        
                        <label for="email">Your Email</label>
                        <input type="text">
                        <br>
                        <label for="group">Select which group best represents you</label>
                        <select id="group">
                            <optgroup label="Occupation">
                                <option value="student">Student</option>
                                <option value="educator">Educator</option>
                                <option value="recruiter">Recruiter</option>
                                <option value="others">Others</option>
                            </optgroup>
                        </select>
                        <br>
                        <label for="continent">Select your continent</label>
                        <input list="continents" id="continent" name="continent">
                        <datalist id="continents">
                            <option value="Asia"></option>
                            <option value="Africa"></option>
                            <option value="North America"></option>
                            <option value="South America"></option>
                            <option value="Antarctica"></option>
                            <option value="Europe"></option>
                            <option value="Australia"></option>
                        </datalist>
                        <br>
                        <label for="comments">Any remarks</label>
                        <br>
                        <textarea>Your remarks here...</textarea>
                        <br>
                        <button type="submit">Save</button>
                    </fieldset>
                </form>
                <br>
                <details>
                    <summary>Hello!</summary>
                    If this is your first time here, please share this with your friends!
                </details>
            </section>
            <br>
            <section id="Example Form">
                <div class="form-container">
                <h2>Example Form</h2>
                    <form id="exampleForm" action="https://httpbin.org/post" method="post">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required minlength="2" maxlength="50" pattern="[a-zA-Z ]+" oninput="validateInput(this, 'name')">
                        <br>
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                        <br>
                        <label for="comments">Comments:</label>
                        <textarea id="comments" name="comments" rows="4" required minlength="10" maxlength="50" pattern="[a-zA-Z0-9.,!? ]+" oninput="validateInput(this, 'comments')"></textarea>
                        <output for="comments" class="info"></output>
                        <br>
                        <input type="hidden" id="possible_bot" name="possible_bot" value="true">
                        <button type="submit">Submit</button>

                        <output for="name" class="error"></output>
                        <output for="email" class="error"></output>
                        <output for="comments" class="error"></output>

                        <output class="success"></output>
                    </form>
                </div>
            </section>
            <br>
        </main>

        <footer>
            <p>Created by Benedict Tan &spadesuit;</p>
        </footer>

        <script>
            // Check if a theme is already set in localStorage
            var savedTheme = localStorage.getItem('theme');

            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            }

            function toggleTheme() {
            // Toggle between light and dark themes
            var currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            var newTheme = currentTheme === 'light' ? 'dark' : 'light';

            // Update the HTML attribute and localStorage
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
}

            var formErrors = [];

            document.getElementById('exampleForm').addEventListener('submit', function(event) {
                // var form = event.target;
    
                // // Check the validity of each field
                // if (!form.checkValidity()) {
                //     // Prevent form submission if any field is invalid
                //     event.preventDefault();
    
                //     // Display custom error messages
                //     displayError('name', 'Please enter a valid name.');
                //     displayError('email', 'Please enter a valid email address.');
                //     displayError('comments', 'Please enter valid comments.');
                // }

                // Add form errors to the formErrors array
                formErrors.push({ field: 'name', message: document.getElementById('name').validationMessage });
                formErrors.push({ field: 'email', message: document.getElementById('email').validationMessage });
                formErrors.push({ field: 'comments', message: document.getElementById('comments').validationMessage });

                // Attach the form-errors as a hidden field
                var formErrorsInput = document.createElement('input');
                formErrorsInput.type = 'hidden';
                formErrorsInput.name = 'form-errors';
                formErrorsInput.value = JSON.stringify(formErrors);

                // Append the hidden field to the form
                event.target.appendChild(formErrorsInput);
            });
    
            // Function to display custom error messages
            function displayError(fieldId, message) {
                var field = document.getElementById(fieldId);
                var errorOutput = document.querySelector('output[for="' + fieldId + '"].error');
    
                if (!field.checkValidity()) {
                    // If field is invalid, set custom error message
                    field.setCustomValidity(message);
                    form.reportValidity();
                }
    
                // Display the error message
                errorOutput.textContent = message;

                // Fade out the error message 
                setTimeout(function() {
                    errorOutput.textContent = '';
                }, 3);
            }

            // Function to validate input against the specified pattern
            function validateInput(input, fieldId) {
                var pattern = new RegExp(input.pattern);
                var inputValue = input.value;

                if (!pattern.test(inputValue)) {
                    // Flash the field and present a message for illegal character
                    input.classList.add('error-flash');

                    // Display a message in the error message area
                    displayError(fieldId, 'Illegal character entered.');

                    // Remove the error class and reset the field after a few moments
                    setTimeout(function() {
                        input.classList.remove('error-flash');
                        input.value = inputValue.replace(/[^a-zA-Z0-9.,!? ]+/g, '');
                    }, 3); // Adjust the timeout value as needed
                }

                // Update the character countdown in the info message area
                updateCharacterCount(input, fieldId);
            }

            // Function to update character countdown
            function updateCharacterCount(input, fieldId) {
                var infoOutput = document.querySelector('output[for="' + fieldId + '"].info');
                var remainingCharacters = input.maxLength - input.value.length;

                infoOutput.textContent = 'Characters remaining: ' + remainingCharacters;

                // Change style based on the remaining characters
                if (remainingCharacters <= 20) {
                    infoOutput.classList.add('warn');
                }

                if (remainingCharacters <= 10) {
                    infoOutput.classList.add('error');
                }
            }
        </script>
    </body>
</html>